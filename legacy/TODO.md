# Edge Tool 로그 뷰어 개발 TODO 리스트

## �️ Phase 0: 아키텍처 리팩토링 (최우선 - 모든 기능 구현 전 필수)

### 0.1 모듈형 아키텍처 구축 ✅ **완료**
- [x] **EventBus 구현** (모듈간 통신 중앙 관리) ✅
  - [x] 이벤트 구독/발행/해제 기능 ✅
  - [x] 네임스페이스 지원 (log:, filter:, highlight: 등) ✅
  - [x] 에러 처리 및 디버깅 지원 ✅
- [x] **AppState 구현** (중앙집중식 상태 관리) ✅
  - [x] 상태 변경 감지 및 알림 ✅
  - [x] 상태 구독/업데이트 인터페이스 ✅
  - [x] localStorage와 자동 동기화 ✅
- [x] **ModuleLoader 구현** (동적 모듈 로딩) ✅
  - [x] 지연 로딩 (Lazy Loading) 지원 ✅
  - [x] 의존성 주입 (Dependency Injection) ✅
  - [x] 모듈 생명주기 관리 ✅

### 0.2 기존 코드 리팩토링 ✅ **완료**
- [x] **app.js → 모듈별 분리** ✅
  - [x] modules/LogViewer.js (메인 로그 뷰어) ✅
  - [x] modules/FilterManager.js (필터 관리) ✅
  - [x] modules/WebSocketService.js (WebSocket 통신) ✅
  - [x] core/EventBus.js, AppState.js, ModuleLoader.js ✅
- [x] **새 모듈 구조 적용** ✅
  - [x] js/core/ 폴더 구조 생성 ✅
  - [x] js/modules/ 폴더 구조 생성 ✅
  - [x] 모듈간 EventBus 통신으로 전환 ✅

### 0.4 메모리 최적화 및 LogBuffer 시스템 ✅ **완료**
- [x] **LogBuffer 메모리 관리 시스템** ✅
  - [x] 메모리 기반 로그 버퍼 구현 (파일 기반 제거) ✅
  - [x] 클라이언트별 소비 위치 추적 시스템 ✅
  - [x] 자동 정리 메커니즘 (클라이언트 수집 후 삭제) ✅
  - [x] 실시간 WebSocket 연동 (중간 파일 경유 제거) ✅
- [x] **메모리 버퍼 최적화** ✅
  - [x] 버퍼 크기 상수화 (constants.go: LOG_BUFFER_MAX_SIZE = 1000) ✅
  - [x] 클라이언트별 소비 위치 추적으로 안전한 메모리 정리 ✅
  - [x] 과도한 디버깅 로그 제거 (대량 정리 시에만 출력) ✅
- [x] **WebSocket 자동 스크롤 문제 수정** ✅
  - [x] Race Condition 해결 (타이밍 지연 제거) ✅
  - [x] "최신로그보기" 버튼 표시 중 자동 스크롤 차단 ✅
  - [x] 사용자 의도 존중 로직 구현 ✅
- [x] **로그 시간 표시 개선** ✅
  - [x] 원본 시간 문자열 우선 표시 (Oct 02 01:09:41 형태 유지) ✅
  - [x] 날짜 정보 포함된 시간 표시로 변경 ✅

## �🎯 Phase 1: UI/UX 개선 (우선순위 높음)

### 1.1 하이라이트 기능
- [ ] 하이라이트 규칙 UI 컴포넌트 개발
  - [ ] 텍스트 입력 필드 추가
  - [ ] 색상 선택 팔레트 컴포넌트 구현
  - [ ] 하이라이트 규칙 리스트 UI
- [ ] 하이라이트 로직 구현
  - [ ] 로그 라인 텍스트 매칭 함수
  - [ ] 배경색 적용 CSS 클래스 동적 생성
  - [ ] 실시간 하이라이트 적용
- [ ] 데이터 저장
  - [ ] localStorage에 하이라이트 규칙 저장
  - [ ] 페이지 로드시 하이라이트 규칙 복원
  - [ ] 하이라이트 규칙 삭제/수정 기능

### 1.2 테이블 컬럼 관리
- [ ] 설정 UI 개발
  - [ ] 헤더에 ⚙️ 톱니바퀴 버튼 추가
  - [ ] 팝업 모달 컴포넌트 구현
  - [ ] 컬럼별 체크박스 리스트
- [ ] 컬럼 표시/숨김 로직
  - [ ] 동적 테이블 헤더 렌더링
  - [ ] 컬럼 데이터 필터링
  - [ ] CSS 클래스 토글
- [ ] 설정 저장
  - [ ] localStorage에 컬럼 설정 저장
  - [ ] 기본 설정 정의
  - [ ] 설정 초기화 기능

### 1.3 컬럼 크기 조절
- [ ] 리사이즈 핸들 UI
  - [ ] 테이블 헤더에 드래그 핸들 추가
  - [ ] 마우스 커서 변경 (resize cursor)
  - [ ] 시각적 드래그 피드백
- [ ] 드래그 로직 구현
  - [ ] mousedown/mousemove/mouseup 이벤트 처리
  - [ ] 최소/최대 너비 제한
  - [ ] 부드러운 리사이즈 애니메이션
- [ ] 너비 설정 저장
  - [ ] localStorage에 컬럼 너비 저장
  - [ ] 페이지 로드시 너비 복원

### 1.4 키보드 단축키
- [ ] 전역 키보드 이벤트 처리
  - [ ] Enter/Space 키 감지
  - [ ] 포커스 상태 확인 (입력 필드가 아닐 때만)
  - [ ] "최신 로그 보기" 버튼 동작 연결
- [ ] 추가 단축키 구현
  - [ ] Ctrl+F: 필터 입력 포커스
  - [ ] ESC: 모든 필터 삭제
  - [ ] Ctrl+S: 로그 내보내기 (추후)

### 1.5 **자동완성 기능 수정** (현재 동작 안함 - 긴급)
- [ ] **DOM 요소 연결 수정**
  - [ ] #ghost-text, #dropdown-suggestions 요소 제대로 활용
  - [ ] GhostTextRenderer 클래스 수정 (자체 생성 → 기존 요소 사용)
  - [ ] DropdownComponent 클래스 수정 (자체 생성 → 기존 요소 사용)
- [ ] **이벤트 처리 수정**
  - [ ] 키보드 입력 이벤트 디버깅
  - [ ] 자동완성 엔진 초기화 확인
  - [ ] 제안 생성 및 표시 로직 검증

## 🖥️ Phase 2: 백엔드 확장 (중간 우선순위)

### 2.1 호스트 정보 표시
- [ ] Go 서버 API 개발
  - [ ] `/api/host-info` 엔드포인트 추가
  - [ ] 호스트 정보 수집 함수 (이름, IP, 연결타입)
  - [ ] JSON 응답 구조 정의
- [ ] 프론트엔드 호스트 정보 UI
  - [ ] 상단 헤더에 호스트 정보 섹션 추가
  - [ ] 호스트 정보 가져오기 API 호출
  - [ ] 연결 상태 표시 (온라인/오프라인)

## 💾 Phase 3: 데이터 관리 (중간 우선순위)

### 3.1 로그 내보내기
- [ ] 내보내기 UI
  - [ ] 내보내기 버튼 추가
  - [ ] 형식 선택 (log, csv, json)
  - [ ] 범위 선택 (전체/필터링된 로그)
- [ ] 데이터 변환 로직
  - [ ] JSON 형식 변환
  - [ ] CSV 형식 변환 (헤더 포함)
  - [ ] 원본 로그 형식 유지
- [ ] 파일 다운로드
  - [ ] Blob API를 이용한 파일 생성
  - [ ] 다운로드 링크 생성
  - [ ] 파일명 자동 생성 (날짜_시간_호스트.확장자)

### 3.2 북마크 기능
- [ ] 북마크 UI 컴포넌트
  - [ ] 로그 라인별 ⭐ 버튼 추가
  - [ ] 북마크 리스트 사이드바
  - [ ] 북마크 메모 추가/편집 모달
- [ ] 북마크 데이터 관리
  - [ ] IndexedDB 스키마 설계
  - [ ] 북마크 추가/삭제/수정 함수
  - [ ] 북마크 검색/필터링
- [ ] 북마크 네비게이션
  - [ ] 북마크된 로그로 스크롤 이동
  - [ ] 북마크 순서 정렬 (시간순, 중요도순)
  - [ ] 북마크 내보내기/가져오기

## 🔧 Phase 4: 개발자 도구 (낮은 우선순위)

### 4.1 메모리 사용량 모니터링
- [x] 메모리 사용량 측정
  - [x] 서버 측: IncrementalLogReader에 maxLogs(10000) 및 logBuffer 추가 ✅
  - [x] 클라이언트 측: LogViewer에 maxLogs=10000 제한 적용 ✅
  - [x] 오래된 로그 자동 정리 로직 구현 ✅
  - [ ] performance.memory API 활용 (추후)
  - [ ] 주기적 메모리 사용량 체크 (추후)
  - [ ] 메모리 사용량 히스토리 저장 (추후)
- [ ] 메모리 정보 UI
  - [ ] 상단 상태바에 메모리 사용량 표시
  - [ ] 메모리 사용량 그래프 (선택사항)
  - [ ] 메모리 정리 버튼 (가비지 컬렉션 유도)

### 4.2 자동완성 고도화
- [ ] 동적 제안 시스템
  - [ ] 현재 로그에서 추출된 값들로 제안
  - [ ] 빈도 기반 제안 우선순위
  - [ ] 실시간 제안 업데이트
- [ ] 히스토리 기반 제안
  - [ ] 사용자 입력 히스토리 저장
  - [ ] 자주 사용하는 필터 우선 제안
  - [ ] 제안 학습 알고리즘
- [ ] 자동완성 UI 개선
  - [ ] 더 나은 드롭다운 스타일링
  - [ ] 키보드 네비게이션 개선
  - [ ] 제안 미리보기

## 🚀 추가 개선사항

### 성능 최적화
- [ ] 가상화된 테이블 구현 (대용량 로그 처리)
- [ ] 로그 청크 단위 로딩
- [ ] 메모리 사용량 최적화
- [ ] 렌더링 성능 개선

### 접근성 개선
- [ ] 키보드 전용 네비게이션 지원
- [ ] 스크린 리더 지원
- [ ] 고대비 테마 옵션
- [ ] 폰트 크기 조절

### 반응형 디자인
- [ ] 모바일 화면 최적화
- [ ] 태블릿 화면 지원
- [ ] 터치 제스처 지원