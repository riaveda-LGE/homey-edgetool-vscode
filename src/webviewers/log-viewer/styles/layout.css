.lv-root{
  height:100vh;
  display:grid;
  grid-template-rows: var(--toolbar-h) var(--splitter-h) 1fr auto auto;
  grid-template-columns: 1fr;
  overflow:hidden;
  border: 1px solid var(--border-strong);
  border-radius: 10px;
  box-shadow: 0 6px 18px rgba(0,0,0,.25), inset 0 0 0 1px rgba(255,255,255,.02);
}

/* Toolbar */
.lv-toolbar{
  position: relative;
  display:flex; align-items:center; gap:10px;
  padding: 6px 10px;
  background: var(--panel);
  border-bottom: 1px solid var(--border-strong);
}

/* splitters */
.lv-splitter{
  height: var(--splitter-h);
  background: var(--panel);
  position: relative;
  user-select: none;
  cursor: row-resize;
  border-top: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
}
.lv-splitter::before{
  content:"";
  position:absolute; left:0; right:0; top:50%; height:1px; background:#000; opacity:.4; transform: translateY(-50%);
}

/* center area: logs + (optional) bookmarks  */
.lv-main{
  min-height: 0;
  display:grid;
  grid-template-columns: 1fr;
  overflow:hidden;
}
.lv-center{
  min-height: 0; min-width:0;
  display:grid;
  grid-template-rows: auto 1fr; /* header + grid */
  border-right: 1px solid transparent;
}
.lv-bookmarks{
  min-width: 220px; width: var(--bookmark-w);
  background: var(--panel);
  border-left: 1px solid var(--border-strong);
  display:flex; flex-direction: column;
}
.lv-splitter-vert{
  width: 6px; cursor: col-resize; background: var(--panel);
  border-left: 1px solid var(--border); border-right: 1px solid var(--border);
}

/* when bookmarks visible -> three columns: center | splitter | bookmarks */
.lv-main.has-bookmarks{
  grid-template-columns: 1fr 6px var(--bookmark-w);
}

/* grid header */
.lv-log-header{
  position: sticky; top: 0;
  display:grid;
  /* time | proc | pid | src | msg */
  grid-template-columns: var(--col-time-w) var(--col-proc-w) var(--col-pid-w) var(--col-src-w) 1fr;
  gap: 0;
  background: var(--panel);
  border-bottom: 1px solid var(--border-strong);
  z-index:1;
}
.lv-col-h{
  display:flex; align-items:center; gap:6px;
  padding: 6px 8px;
  white-space: nowrap;
  border-right: 1px solid var(--border);

  /* 트랙이 0px일 때 내용이 비치지 않도록 */
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
}
.lv-col-h:last-child{ border-right: none; }

/* 열별 헤더 정렬 */
.lv-col-h.h-pid{ justify-content: flex-end; }
.lv-col-h.h-src{ justify-content: flex-start; }

/* column resizer (vertical) */
.col-resizer{
  margin-left:auto; width:6px; height:18px;
  cursor: col-resize;
  opacity:.5;
}

/* log grid */
.lv-log-grid{
  min-height:0; overflow:auto;
  outline: 1px solid var(--border);
  outline-offset: -1px;
}
.lv-row{
  display:grid;
  /* time | proc | pid | src | msg */
  grid-template-columns: var(--col-time-w) var(--col-proc-w) var(--col-pid-w) var(--col-src-w) 1fr;
  gap: 0;
  padding: 0;
  height: var(--row-h, 22px); /* 가상 스크롤 계산과 맞춤 */
}
.lv-cell{
  padding: 3px 8px;
  border-bottom: 1px solid rgba(255,255,255,.06);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  min-width: 0; /* 헤더와 동일하게 */
}

/* spacer for virtualized scroll */
.lv-spacer{
  width: 100%;
  height: 0;
}

/* 열별 셀 정렬/표현 */
.lv-cell.pid{
  text-align: right;
  font-variant-numeric: tabular-nums; /* 숫자폭 고정 */
}
.lv-cell.src{
  font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;
  direction: ltr;
}

.lv-row:hover .lv-cell{ background: var(--row-hover); }
.lv-row.selected .lv-cell{ background: var(--row-selected); color: var(--row-selected-fg); }

/* left star (bookmark toggle) */
.lv-star{
  width:14px; margin-right:6px; opacity:.7; cursor:pointer; user-select:none;
}
.lv-star::before{ content:'☆'; }
.lv-row.bookmarked .lv-star::before{ content:'★'; }

/* search results at bottom */
.lv-search-results{
  display:block;
  min-height: 120px;
  max-height: 40vh;
  overflow:auto;
  border-top: 1px solid var(--border-strong);
  background: var(--panel);
}

/* bookmark pane */
.bm-header{ font-weight: 700; padding: 8px 10px; border-bottom: 1px solid var(--border); }
.bm-list{ overflow:auto; padding: 6px; }
.bm-item{
  padding: 6px 8px; border-radius: 6px; cursor:pointer; user-select:none;
}
.bm-item:hover{ background: var(--row-hover); }

/* modal for full message */
.lv-modal[hidden]{ display:none; }
.lv-modal{
  position: fixed; inset:0; display:flex; align-items:center; justify-content:center;
  background: rgba(0,0,0,.35); z-index:1000;
}
.lv-modal-card{
  width: min(900px, 92vw); max-height: 80vh;
  background: var(--panel);
  border: 1px solid var(--border-strong);
  border-radius: var(--radius);
  box-shadow: var(--shadow-inset);
  display:flex; flex-direction: column;
}
.lv-modal-head{
  display:flex; align-items:center; justify-content: space-between;
  padding: 8px 10px; border-bottom: 1px solid var(--border);
}
.lv-modal-body{
  margin:0; padding: 12px; overflow:auto; white-space: pre-wrap;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
}

/* selection rectangle (drag) */
.lv-select-rect{
  position:absolute; border:1px dashed var(--link); background: rgba(56, 121, 217, .08); pointer-events:none;
}
