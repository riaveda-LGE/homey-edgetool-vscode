📌 사용자 요구사항 리스트업
1. 명령어 흐름

모든 시작은 edge 패널의 edge> 입력창에서 사용자가 homey-logging을 입력해야 함.

이후 QuickPick으로 2가지 모드 선택:

실시간 로그 모드

현재 연결된 기기의 로그를 보여줌.

기기 미연결 시 → "기기가 연결되어 있지 않습니다." 에러 메시지 출력.

파일 병합 모드

폴더 선택 다이얼로그로 로그 파일들이 있는 경로를 선택.

homey-pro.log, homey-pro.log.1, homey-pro.log.2 … 여러 파일을 병합.

병합된 로그는 custom editor에 최신 로그가 아래, 오래된 로그가 위 순서로 실시간 표시.

병합 완료 후 전체를 보여주는 게 아니라 읽히는 대로 즉시 append.

2. Custom Editor (로그 뷰어) 기능

메인 로그 뷰

시간, 프로세스명, PID, 메시지 탭으로 구성.

메시지 더블클릭 → 호버 팝업(해당 로그 행 전체 표시, 복사 버튼, 닫기 버튼).

최신 로그가 아래쪽에 붙고 스크롤이 따라감.

검색

검색 시 Notepad++처럼 결과만 따로 보여주는 뷰 제공.

검색 결과 클릭 시 메인 뷰가 해당 위치로 이동.

필터링

특정 조건(레벨, 소스, 문자열 등)에 맞는 로그만 메인 뷰에 표시.

북마크

각 로그 행에 별표(☆). 클릭 시 북마크됨(★).

북마크 모아보기 창에서 선택 시 해당 위치로 스크롤 이동.

하이라이트

버튼으로 팝업 열어서 최대 5개 패턴 등록 가능.

각 패턴마다 12색 중 선택 가능.

매칭된 문자열은 색상 강조 표시.

스크롤 동작

실시간 로그 모드 → 기본적으로 최신 로그를 따라감.

사용자가 스크롤하면 따라가기 멈춤 → "최신 로그 보기" 버튼 표시.

버튼 클릭 시 다시 최신 로그 따라감.

파일 병합 모드 → 사용자가 스크롤한 위치 그대로 보여주고, 최신 로그 버튼 없음.

스크롤 위치는 퍼센트 기반 (전체 로그 개수 대비 위치).

3. 성능 / 저장 전략

실시간 로그도 수십만 줄 쌓일 수 있음.

모든 로그를 메모리에 다 두지 않고, 오래된 로그는 파일로 flush.

필요할 때(스크롤 이동, 검색) 해당 위치 로그를 파일에서 다시 빠르게 로딩.

HybridLogBuffer 같은 구조로 realtime / viewport / search / spill 분리.

4. 파일 병합 타임존 보정

로그 라인에는 타임존 정보가 없음 → 직접 파악 어려움.

요구사항:

타임존 점프 방지 로직 필요.

파일이 여러 개일 때, 새 파일 시작할 때 시간이 갑자기 역행하거나 큰 점프가 생기면 감지.

합리적인 기준으로 보정(ex: 로컬 시간 기준, jump detection).

즉, 단순히 문자열 정렬만 하지 말고, 실제 시간 순서에 맞게 안정적으로 병합해야 함.

✅ 정리하면, 지금까지 네가 요청한 건 크게 (1) 명령어 흐름 → (2) custom editor 기능 → (3) 메모리/성능 전략 → (4) 타임존 점프 보정이야.