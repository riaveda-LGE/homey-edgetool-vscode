# Homey EdgeTool – TODO List (완벽한 시스템을 향해)

상태: ☐ 미정 · ◐ 진행중 · ☑ 완료  
우선순위: **P0(핵심)**, P1(중요), P2(개선)

---

## 1) 빌드·패키징·배포

- [ ] **P0** `files` 기반 패키징 검증 (README/CHANGELOG 없으므로 제외 유지)  
- [ ] **P0** VSCE 최신 유지 (`@vscode/vsce`) 및 `npm run deploy` 통합  
- [ ] **P1** CI 빌드 파이프라인 (Windows + Linux)  
- [ ] **P1** 프리릴리즈 채널/태그/릴리즈 전략 수립 (`latest.json` 자동 갱신)  
- [ ] **P2** 무결성 검증 강화 (sha256 외 PGP 서명 등)

---

## 2) 업데이트 시스템

- [ ] **P0** Node 20 런타임 보장 (문서화 + 체크)  
- [ ] **P0** 실패/회귀 처리: VSIX 설치 실패 시 롤백 안내  
- [ ] **P1** 네트워크 예외 상세화 (타임아웃/SSL/DNS 구분)  
- [ ] **P1** `latest.json` 스키마 검증  
- [ ] **P2** 프록시/사내망 설정 지원

---

## 3) 실행·연결 계층

### ExecRunner
- [ ] **P0** SIGTERM 후 SIGKILL 폴백 처리  
- [ ] **P1** stdout/stderr 로그 파일 옵션  
- [ ] **P1** 환경변수/작업디렉토리 보안 필터

### ConnectionManager & HomeyController
- [ ] **P0** 실제 SSH/ADB 동작 구현 (현재는 스텁)  
- [ ] **P0** 연결 상태 관리 이벤트 (`connected/disconnected`)  
- [ ] **P1** 재시도/백오프/타임아웃 정책  
- [ ] **P2** 다중 호스트 프로파일 관리

---

## 4) 어댑터

### SSH
- [ ] **P0** Windows/Linux 호환 키 권한 처리  
- [ ] **P1** `StrictHostKeyChecking` 옵션 제어  
- [ ] **P2** sftp/rsync 기반 대용량 전송 지원

### ADB
- [ ] **P0** adb 존재/버전 체크, 장치 목록 조회  
- [ ] **P1** 로그캣 스트림 필터 및 재연결  
- [ ] **P2** 포트 포워딩/파일 push·pull 지원

---

## 5) 로그 파이프라인

### HybridLogBuffer & LogSessionManager
- [ ] **P0** 실시간 세션 구현 (ssh tail / adb logcat)  
- [ ] **P0** 파일 병합 기능 구현 (정렬/역순/배치)  
- [ ] **P1** 메모리 상한·스필 정책  
- [ ] **P1** 지연/드롭 모니터링 (큐 길이/처리율)  
- [ ] **P2** 색상/레벨 매핑, rate limit

### LogFileIntegration
- [ ] **P0** 포맷 파서 추상화  
- [ ] **P1** 중복 제거/시퀀스 보정  
- [ ] **P2** 압축 파일(.gz) 처리

### 검색
- [ ] **P1** 하이라이트 & 컨텍스트 추출  
- [ ] **P1** 대용량 인덱싱  
- [ ] **P2** 쿼리 언어(레벨/소스/기간 등)

---

## 6) 웹뷰 UI

### Edge Panel
- [ ] **P0** 명령 라우팅을 `commandHandlers`로 일원화  
- [ ] **P1** UI 필터(레벨/소스/텍스트) 및 검색바  
- [ ] **P1** 가상 스크롤 (대용량 로그 최적화)  
- [ ] **P2** 다국어 지원 및 접근성 보완

### Log Viewer Editor
- [ ] **P1** 실시간 업데이트 파이프라인 통합  
- [ ] **P2** 파일 범위 검색/필터 패널

### 보안/리소스
- [ ] **P0** CSP 엄격 유지 (nonce, default-src 'none')  
- [ ] **P1** 리소스 로딩 실패 시 UI 처리

---

## 7) 메시징 프로토콜

- [ ] **P0** H2W/W2H 타입 안정화 및 버전 협상  
- [ ] **P1** 에러 코드/페이로드 표준화  
- [ ] **P2** 향후 호환성 위한 프로토콜 문서화
